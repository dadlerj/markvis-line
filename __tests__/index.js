import d3node from 'd3-node'
import line from '../src/index'

const data = [
  { key: 1, value: 1 },
  { key: 2, value: 2 },
  { key: 3, value: 3 },
  { key: 4, value: 4 },
  { key: 5, value: 5 }
]
const result = `<divid=\"chart\"><svgxmlns=\"http://www.w3.org/2000/svg\"width=\"960\"height=\"500\"><gtransform=\"translate(20,20)\"><g><gtransform=\"translate(0,460)\"fill=\"none\"font-size=\"10\"font-family=\"sans-serif\"text-anchor=\"middle\"><pathclass=\"domain\"stroke=\"#000\"d=\"M0.5,6V0.5H920.5V6\"></path><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">1.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(115,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">1.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(230,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">2.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(345,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">2.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(460,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">3.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(575,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">3.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(690,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">4.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(805,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">4.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(920,0)\"><linestroke=\"#000\"y2=\"6\"x1=\"0.5\"x2=\"0.5\"></line><textfill=\"#000\"y=\"9\"x=\"0.5\"dy=\"0.71em\">5.0</text></g></g><gfill=\"none\"font-size=\"10\"font-family=\"sans-serif\"text-anchor=\"end\"><pathclass=\"domain\"stroke=\"#000\"d=\"M-6,460.5H0.5V0.5H-6\"></path><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,460)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">1.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,403)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">1.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,345)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">2.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,288)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">2.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,230)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">3.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,173)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">3.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,115)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">4.0</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,58)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">4.5</text></g><gclass=\"tick\"opacity=\"1\"transform=\"translate(0,0)\"><linestroke=\"#000\"x2=\"-6\"y1=\"0.5\"y2=\"0.5\"></line><textfill=\"#000\"x=\"-9\"y=\"0.5\"dy=\"0.32em\">5.0</text></g></g><pathfill=\"none\"stroke=\"steelblue\"stroke-width=\"1.5\"d=\"M0,460L38.333333333333336,440.8333333333333C76.66666666666667,421.6666666666667,153.33333333333334,383.3333333333333,230,345C306.6666666666667,306.6666666666667,383.3333333333333,268.3333333333333,460,230C536.6666666666666,191.66666666666666,613.3333333333334,153.33333333333334,690,115C766.6666666666666,76.66666666666667,843.3333333333334,38.333333333333336,881.6666666666666,19.166666666666668L920,0\"></path></g></g></svg></div>`

function removeAllSpace (str) {
  return str.replace(/\s+/g, '')
}

test('bar chart generator', () => {
  expect(line).toBeDefined()
  expect(removeAllSpace(line({ data, d3node }))).toBe(removeAllSpace(result))
})
